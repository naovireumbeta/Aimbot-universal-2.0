-- RAYFIELD
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- SERVICES
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

-- AIM VARS
local aimActive = false
local fovValue = 100
local stickyForce = 0.9
local showFOV = false

-- ESP VARS
local ESP_Line = false
local ESP_Box = false
local ESP_Health = false
local ESPObjects = {}

-- BOOSTER VARS
local stretchOn = false
local fpsOn = false

-- ESP CONFIG
local ESPSettings = {
    LineColor = Color3.fromRGB(255,255,255),
    Thickness = 1.5,
    MaxDistance = 1200
}

-- WINDOW
local Window = Rayfield:CreateWindow({
    Name = "aimbot2.0",
    LoadingTitle = "aimbot",
    LoadingSubtitle = "Aim + ESP + Booster",
    ConfigurationSaving = {Enabled = false}
})

-- TABS
local AimTab = Window:CreateTab("AIM", 4483362458)
local ESPTab = Window:CreateTab("ESP", 4483362458)
local BoosterTab = Window:CreateTab("BOOSTER", 4483362458)
local InfoTab = Window:CreateTab("INFO", 4483362458)

-- INFO
InfoTab:CreateParagraph({
    Title = "Informações",
    Content = "Criador: @naovirebeta\nLançamento: 03/02/2026"
})

-- ================= AIM =================
AimTab:CreateToggle({
    Name = "Aimbot",
    CurrentValue = false,
    Callback = function(v)
        aimActive = v
    end
})

AimTab:CreateToggle({
    Name = "Exibir FOV",
    CurrentValue = false,
    Callback = function(v)
        showFOV = v
        fovCircle.Visible = v
    end
})

AimTab:CreateSlider({
    Name = "FOV",
    Range = {20,360},
    Increment = 1,
    CurrentValue = fovValue,
    Callback = function(v)
        fovValue = v
    end
})

AimTab:CreateSlider({
    Name = "Smooth",
    Range = {1,100},
    Increment = 1,
    CurrentValue = stickyForce*100,
    Callback = function(v)
        stickyForce = v/100
    end
})

-- ================= ESP =================
ESPTab:CreateToggle({
    Name = "ESP Line",
    CurrentValue = false,
    Callback = function(v) ESP_Line = v end
})

ESPTab:CreateToggle({
    Name = "ESP Box",
    CurrentValue = false,
    Callback = function(v) ESP_Box = v end
})

ESPTab:CreateToggle({
    Name = "ESP Health",
    CurrentValue = false,
    Callback = function(v) ESP_Health = v end
})

-- ================= BOOSTER =================

-- ANTI LAG
BoosterTab:CreateButton({
    Name = "Anti Lag",
    Callback = function()
        Lighting.GlobalShadows = false
        Lighting.FogEnd = 9e9
        Lighting.Brightness = 1

        for _,v in pairs(workspace:GetDescendants()) do
            if v:IsA("BasePart") then
                v.Material = Enum.Material.Plastic
                v.Reflectance = 0
            elseif v:IsA("Decal") or v:IsA("Texture") then
                v:Destroy()
            end
        end
    end
})

-- TELA ESTICADA
getgenv().Resolution = { [".gg/scripters"] = 0.44 }
local stretchConn

BoosterTab:CreateToggle({
    Name = "Tela Esticada",
    CurrentValue = false,
    Callback = function(v)
        stretchOn = v
        if v then
            if stretchConn then stretchConn:Disconnect() end
            stretchConn = RunService.RenderStepped:Connect(function()
                camera.CFrame = camera.CFrame * CFrame.new(
                    0,0,0,
                    1,0,0,
                    0,getgenv().Resolution[".gg/scripters"],0,
                    0,0,1
                )
            end)
        else
            if stretchConn then
                stretchConn:Disconnect()
                stretchConn = nil
            end
        end
    end
})

-- FPS DISPLAY
local fpsText = Drawing.new("Text")
fpsText.Size = 18
fpsText.Center = false
fpsText.Outline = true
fpsText.Position = Vector2.new(10,10)
fpsText.Visible = false

local last = tick()
local frames = 0

BoosterTab:CreateToggle({
    Name = "Exibir FPS",
    CurrentValue = false,
    Callback = function(v)
        fpsOn = v
        fpsText.Visible = v
    end
})

RunService.RenderStepped:Connect(function()
    if not fpsOn then return end
    frames += 1
    if tick() - last >= 1 then
        local fps = frames
        frames = 0
        last = tick()

        fpsText.Text = "FPS: "..fps

        if fps < 30 then
            fpsText.Color = Color3.fromRGB(255,0,0) -- vermelho
        elseif fps < 60 then
            fpsText.Color = Color3.fromRGB(255,255,0) -- amarelo
        else
            fpsText.Color = Color3.fromRGB(0,170,255) -- azul
        end
    end
end)

-- ================= FOV =================
fovCircle = Drawing.new("Circle")
fovCircle.Color = Color3.fromRGB(0,255,255)
fovCircle.Thickness = 2
fovCircle.Filled = false
fovCircle.Visible = false

-- ================= AIM LOOP =================
local function getClosestPlayer()
    local target, dist = nil, fovValue
    local center = Vector2.new(camera.ViewportSize.X/2, camera.ViewportSize.Y/2)

    for _,p in pairs(Players:GetPlayers()) do
        if p ~= player and p.Character and p.Character:FindFirstChild("Head") then
            local pos,vis = camera:WorldToViewportPoint(p.Character.Head.Position)
            if vis then
                local mag = (Vector2.new(pos.X,pos.Y)-center).Magnitude
                if mag < dist then
                    dist = mag
                    target = p.Character.Head
                end
            end
        end
    end
    return target
end

RunService.RenderStepped:Connect(function()
    if showFOV then
        fovCircle.Radius = fovValue
        fovCircle.Position = Vector2.new(
            camera.ViewportSize.X/2,
            camera.ViewportSize.Y/2
        )
    end

    if aimActive then
        local t = getClosestPlayer()
        if t then
            camera.CFrame = camera.CFrame:Lerp(
                CFrame.new(camera.CFrame.Position, t.Position),
                stickyForce
            )
        end
    end
end)
